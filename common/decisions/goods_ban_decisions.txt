ban_opium = {
	is_shown = {
		has_journal_entry = je_opium_obsession
		exists = market
		market.owner = root
		NOT = { is_banning_goods = g:opium }
	}

	possible = {
		NOT = { has_law = law_type:law_free_trade }
		NOT = { has_variable = lost_opium_wars }
		exists = market	
	}

	when_taken = {
		if = {
			limit = {
				has_law = law_type:law_no_substance_controls
			}
			activate_law = law_type:law_opium_ban
		}
		else = {
			add_banned_goods = g:opium
			add_modifier = {
				name = opium_ban_authority
			}
		}
	}
	
    ai_chance = {
        base = 0
		modifier = {
			trigger = {
				OR = {
					has_strategy = ai_strategy_conservative_agenda
					has_strategy = ai_strategy_reactionary_agenda
					has_strategy = ai_strategy_maintain_mandate_of_heaven
				}
			}
			add = 10
		}		 
    }	
}

remove_opium_ban = {
	is_shown = {
		is_banning_goods = g:opium
		exists = market
		market.owner = root
	}

	possible = {
		always = yes
	}

	when_taken = {
		if = {
			limit = {
				has_law = law_type:law_opium_ban
			}
			activate_law = law_type:law_no_substance_controls
			remove_banned_goods = g:opium
			remove_modifier = opium_ban_authority
		}
		else = {
			remove_banned_goods = g:opium
			remove_modifier = opium_ban_authority
		}

	}
	
   ai_chance = {
      base = 0
		modifier = {
			trigger = {
				has_strategy = ai_strategy_progressive_agenda
			}
			add = 10
		}		 
   }	
}

ban_liquor = {
	is_shown = {
		has_variable = prohibition_laws_var
		exists = market
		market.owner = root
		NOT = { is_banning_goods = g:liquor }
	}

	possible = {
		NOT = { has_law = law_type:law_free_trade }
		exists = market
	}

	when_taken = {
		if = {
			limit = {
				OR = {
					has_law = law_type:law_no_substance_controls
					has_law = law_type:law_opium_ban
				}
			}
			activate_law = law_type:law_prohibition
		}
		else = {
			add_banned_goods = g:opium
			add_modifier = {
				name = opium_ban_authority
			}
		}
	}
	
    ai_chance = {
		base = 0
		modifier = {
			trigger = {
				OR = {
					has_strategy = ai_strategy_conservative_agenda
					has_strategy = ai_strategy_reactionary_agenda
					has_strategy = ai_strategy_maintain_mandate_of_heaven
				}
			}
			add = 10
		}
    }	
}

remove_liquor_ban = {
	is_shown = {
		is_banning_goods = g:liquor
		exists = market
		market.owner = root
	}

	possible = {
		always = yes
	}

	when_taken = {
		activate_law = law_type:law_no_substance_controls
	}
	
   ai_chance = {
      base = 0
		modifier = {
			trigger = {
				has_strategy = ai_strategy_progressive_agenda
			}
			add = 10
		}		 
   }	
}