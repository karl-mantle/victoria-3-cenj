# common variables
@coa_width = 768
@coa_height = 512
@canton_scale_cross_x = @[ ( 333 / coa_width ) + 0.001 ]
@canton_scale_cross_y = @[ ( 205 / coa_height ) + 0.001 ]
@canton_scale_sweden_x = @[ ( 255 / coa_width ) + 0.001 ]
@canton_scale_sweden_y = @[ ( 204 / coa_height ) + 0.001 ]
@canton_scale_norway_x = @[ ( 192 / coa_width ) + 0.001 ]
@canton_scale_norway_y = @[ ( 192 / coa_height ) + 0.001 ]
@canton_scale_denmark_x = @[ ( 220 / coa_width ) + 0.001 ]
@canton_scale_denmark_y = @[ ( 220 / coa_height ) + 0.001 ]
@third = @[1/3]

ABS = { # Absaroka
	flag_definition = {
		coa = ABS
		subject_canton = ABS
		priority = 1
	}
}
ALA = { # Alaska
	flag_definition = {
		coa = ALA
		subject_canton = ALA
		priority = 1
	}
	flag_definition = {
		coa = ALA_communist
		subject_canton = ALA_communist
		priority = 1500
		trigger = {
			coa_def_communist_flag_trigger = yes
		}
	}
	flag_definition = {
		coa = ALA_fascist
		subject_canton = ALA_fascist
		priority = 1500
		trigger = {
			coa_def_fascist_flag_trigger = yes
		}
	}
	flag_definition = {
		coa = ALA_subject_RUS
		allow_overlord_canton = no
		subject_canton = LVN_subject_RUS
		priority = 20
		trigger = { 
			coa_def_russian_ensign_trigger = yes
		}
	}
}
CAL = { # California
	flag_definition = {
		coa = CAL 
		allow_overlord_canton = yes
		subject_canton = CAL
	}
	flag_definition = {
		coa = CAL_baj
		allow_overlord_canton = yes
		subject_canton = CAL_baj
		priority = 10
		trigger = {
			scope:actor ?= {
				any_scope_state = {
					state_region = s:STATE_CALIFORNIA
				}
				any_scope_state = {
					state_region = s:STATE_BAJA_CALIFORNIA
				}
			}
		}
	}
	flag_definition = {
		coa = CAL_ussr
		allow_overlord_canton = yes
		subject_canton = CAL_ussr
		priority = 2000
		trigger = {
			coa_def_communist_flag_trigger = yes
		}
	}
}
CAN = { # Canada
	flag_definition = {
		coa = CAN
		coa_with_overlord_canton = CAN_subject
		allow_overlord_canton = yes
	}
	flag_definition = {
		coa = CAN_republic
		subject_canton = CAN_republic
		priority = 10
		trigger = { 
			coa_def_republic_flag_trigger = yes
		}
	}	
	flag_definition = {
		coa = CAN_theocracy
		subject_canton = CAN_theocracy
		priority = 10
		trigger = { 
			coa_def_theocracy_flag_trigger = yes
		}
	}
	flag_definition = {
		coa = CAN_absolute_monarchy
		subject_canton = CAN_absolute_monarchy
		priority = 20
		trigger = {
			coa_def_absolute_monarchy_flag_trigger = yes
		}
	}
	flag_definition = {
		coa = CAN_dictatorship
		subject_canton = CAN_dictatorship
		priority = 20
		trigger = {
			coa_def_dictatorship_flag_trigger = yes
		}
	}	
	flag_definition = {
		coa = CAN_oligarchy
		subject_canton = CAN_oligarchy
		priority = 25
		trigger = {
			coa_def_oligarchy_flag_trigger = yes
		}
	}	
	flag_definition = {
		coa = CAN_fascist
		subject_canton = CAN_fascist
		priority = 1500
		trigger = { 
			coa_def_fascist_flag_trigger = yes
		}
	}	
	flag_definition = {
		coa = CAN_communist
		priority = 1500
		trigger = { 
			coa_def_communist_flag_trigger = yes
		}
	}	
}
CHE = { # Cherokee
	flag_definition = {
		coa = CHE
		allow_overlord_canton = yes		
		coa_with_overlord_canton = CHE_subject			
		subject_canton = CHE
		priority = 1
	}
}
COM = { # Comanche
	flag_definition = {
		coa = COM
		subject_canton = COM
		priority = 1
	}
}
CSA = { # Confederate States of America
	flag_definition = {
		coa = CSA
		subject_canton = sub_CSA_canton_stars
		priority = 1		
		allow_overlord_canton = yes
		overlord_canton_scale = { 0.5 @[third*2.005] }
	}
	flag_definition = {
		coa = CSA_stainless
		subject_canton = sub_CSA_canton_saltire
		priority = 10
		allow_overlord_canton = yes
		overlord_canton_scale = { 0.5 @[third*2] }
		trigger = { 
			NAND = {
				exists = c:USA
				c:USA = {
					has_journal_entry = je_acw_war
				}
			}
			scope:actor = { 
				has_ruling_interest_group = ig_armed_forces
			}
		}
	}
	flag_definition = {
		coa = CSA_blood_stained
		subject_canton = sub_CSA_canton_saltire
		priority = 15
		allow_overlord_canton = yes
		overlord_canton_scale = { 0.5 @[third*2] }
		trigger = { 
			NAND = {
				exists = c:USA
				c:USA = {
					has_journal_entry = je_acw_war
				}
			}
			scope:actor = { 
				has_ruling_interest_group = ig_armed_forces
				has_ruling_interest_group_count = 1
			}
		}
	}
	flag_definition = {
		coa = CSA_battle_flag
		subject_canton = sub_CSA_canton_saltire
		priority = 20
		trigger = { 
			NAND = {
				exists = c:USA
				c:USA = {
					has_journal_entry = je_acw_war
				}
			}
			scope:actor = { 
				has_ruling_interest_group = ig_armed_forces
			}
			OR = {
				coa_def_military_junta_flag_trigger = yes
				coa_def_dictatorship_flag_trigger = yes
			}
		}
	}
	flag_definition = {
		coa = CSA_theocracy
		subject_canton = CSA_theocracy
		priority = 20
		trigger = { 
			NAND = {
				exists = c:USA
				c:USA = {
					has_journal_entry = je_acw_war
				}
			}
			coa_def_theocracy_flag_trigger = yes
		}
	}	
	flag_definition = {
		coa = CSA_communist
		priority = 1500
		trigger = { 
			NAND = {
				exists = c:USA
				c:USA = {
					has_journal_entry = je_acw_war
				}
			}
			coa_def_communist_flag_trigger = yes
		}
	}
	flag_definition = {
		coa = CSA_subject_MEX
		priority = 30
		trigger = { 
			coa_def_mexican_ensign_trigger = yes
		}
	}

	### DUPLICATE FOR DURING THE ACW THAT REMOVES THE REVOLUTIONARY TEAR IN THE FLAG

	flag_definition = {
		coa = CSA
		subject_canton = sub_CSA_canton_stars
		priority = 2		
		allow_overlord_canton = yes
		allow_revolutionary_indicator = no
		overlord_canton_scale = { 0.5 @[third*2.005] }
		trigger = {
			exists = c:USA
			c:USA = {
				has_journal_entry = je_acw_war
			}
		}
	}
	flag_definition = {
		coa = CSA_stainless
		subject_canton = sub_CSA_canton_saltire
		priority = 10
		allow_overlord_canton = yes
		allow_revolutionary_indicator = no
		overlord_canton_scale = { 0.5 @[third*2] }
		trigger = { 
			exists = c:USA
			c:USA = {
				has_journal_entry = je_acw_war
			}
			scope:actor = { 
				has_ruling_interest_group = ig_armed_forces
			}
		}
	}
	flag_definition = {
		coa = CSA_blood_stained
		subject_canton = sub_CSA_canton_saltire
		priority = 15
		allow_overlord_canton = yes
		allow_revolutionary_indicator = no
		overlord_canton_scale = { 0.5 @[third*2] }
		trigger = { 
			exists = c:USA
			c:USA = {
				has_journal_entry = je_acw_war
			}
			scope:actor = { 
				has_ruling_interest_group = ig_armed_forces
				has_ruling_interest_group_count = 1
			}
		}
	}
	flag_definition = {
		coa = CSA_battle_flag
		subject_canton = sub_CSA_canton_saltire
		priority = 20
		allow_revolutionary_indicator = no
		trigger = { 
			exists = c:USA
			c:USA = {
				has_journal_entry = je_acw_war
			}
			scope:actor = { 
				has_ruling_interest_group = ig_armed_forces
			}
			OR = {
				coa_def_military_junta_flag_trigger = yes
				coa_def_dictatorship_flag_trigger = yes
			}
		}
	}
	flag_definition = {
		coa = CSA_theocracy
		subject_canton = CSA_theocracy
		priority = 20
		allow_revolutionary_indicator = no
		trigger = { 
			exists = c:USA
			c:USA = {
				has_journal_entry = je_acw_war
			}
			coa_def_theocracy_flag_trigger = yes
		}
	}	
	flag_definition = {
		coa = CSA_communist
		priority = 1500
		allow_revolutionary_indicator = no
		trigger = { 
			exists = c:USA
			c:USA = {
				has_journal_entry = je_acw_war
			}
			coa_def_communist_flag_trigger = yes
		}
	}
}
DES = { # Deseret
	flag_definition = {
		coa = DES
		subject_canton = DES
		priority = 1
	}
	flag_definition = {
		coa = DES_dictatorship
		subject_canton = DES_dictatorship
		priority = 20
		trigger = {
			coa_def_dictatorship_flag_trigger = yes
		}
	}	
}
DKT = { # Dakota Sioux
	flag_definition = {
		coa = DKT
		subject_canton = DKT
		priority = 1
	}
}
FLO = { # Florida
	flag_definition = {
		coa = FLO
		subject_canton = FLO
		priority = 1
	}
}
FSA = { # Free States of America
	flag_definition = {
		coa = FSA
		subject_canton = FSA
		coa_with_overlord_canton = FSA_subject	
		allow_overlord_canton = yes
		priority = 1
	}	
	flag_definition = {
		coa = FSA_dictatorship
		subject_canton = FSA_dictatorship
		priority = 20
		trigger = {
			coa_def_dictatorship_flag_trigger = yes
		}
	}	
	flag_definition = {
		coa = FSA_communist
		priority = 1500
		trigger = { 
			coa_def_communist_flag_trigger = yes
		}
	}	
	flag_definition = {
		coa = FSA_subject_MEX
		priority = 30
		trigger = { 
			coa_def_mexican_ensign_trigger = yes
		}
	}		
}
HBC = { # Hudson Bay Company
	flag_definition = {
		coa = HBC
		coa_with_overlord_canton = HBC_subject
		allow_overlord_canton = yes
	}
	flag_definition = {
		coa = HBC_monarchy
		coa_with_overlord_canton = HBC_monarchy
		allow_overlord_canton = yes
		overlord_canton_scale = { @canton_scale_cross_x @canton_scale_cross_y }
		subject_canton = HBC_monarchy
		priority = 20
		trigger = { 
			OR = {
				coa_def_monarchy_flag_trigger = yes
				coa_def_theocracy_flag_trigger = yes
			}
		}
	}
	flag_definition = {
		coa = HBC_communist
		priority = 1500
		trigger = { 
			coa_def_communist_flag_trigger = yes
		}
	}	
	flag_definition = {
		coa = HBC_subject	
		allow_overlord_canton = yes	
		overlord_canton_offset = { 0.01 0.015 }
		overlord_canton_scale = { 0.48 0.47 }			
		priority = 50
		trigger = { 
			coa_def_french_ensign_trigger = yes
		}
	}		
}
IRC = { # Iron Confederacy
	flag_definition = {
		coa = IRC
		subject_canton = IRC
		priority = 1
	}
}
LKT = { # Lakota Sioux
	flag_definition = {
		coa = LKT
		subject_canton = LKT
		priority = 1
	}
}
LOU = { # Louisiana
	flag_definition = {
		coa = LOU
		subject_canton = LOU
		allow_overlord_canton = yes		
		coa_with_overlord_canton = LOU_subject			
		priority = 1
	}
	flag_definition = {
		coa = LOU_monarchy
		subject_canton = LOU_monarchy
		priority = 10
		trigger = { 
			coa_def_theocracy_flag_trigger = yes
		}
	}
	flag_definition = {
		coa = LOU_monarchy
		subject_canton = LOU_monarchy
		priority = 10
		trigger = { 
			coa_def_monarchy_flag_trigger = yes
		}
	}
}
MEX = { # Mexico
	flag_definition = {
		coa = MEX
		subject_canton = MEX
		allow_overlord_canton = yes		
		coa_with_overlord_canton = MEX_subject			
		priority = 1
	}
	flag_definition = {
		coa = MEX_absolute_monarchy
		subject_canton = MEX_absolute_monarchy
		allow_overlord_canton = yes		
		coa_with_overlord_canton = MEX_subject			
		priority = 20
		trigger = { 
			coa_def_absolute_monarchy_flag_trigger = yes
		}
	}	
	flag_definition = {
		coa = MEX_dictatorship
		subject_canton = MEX_dictatorship
		priority = 20
		trigger = {
			coa_def_dictatorship_flag_trigger = yes
		}
	}	
	flag_definition = {
		coa = MEX_communist
		priority = 1500
		trigger = { 
			coa_def_communist_flag_trigger = yes
		}
	}	
	flag_definition = {
		coa = MEX_subject_USA
		priority = 50
		trigger = { 
			coa_def_american_ensign_trigger = yes
		}
	}	
}
MTC = { # Metis
	flag_definition = {
		coa = MTC
		coa_with_overlord_canton = MTC_subject
		allow_overlord_canton = yes
	}
}
NBS = { # New Brunswick
	flag_definition = {
		coa = NBS
		coa_with_overlord_canton = NBS_subject
		allow_overlord_canton = yes		
	}
	flag_definition = {
		coa = NBS_subject_FRA
		allow_overlord_canton = yes			
		priority = 50
		trigger = { 
			coa_def_french_ensign_trigger = yes
		}
	}	
}
NEN = { # New England
	flag_definition = {
		coa = NEN
		subject_canton = NEN
		priority = 1
	}
	flag_definition = {
		coa = NEN_subject_GBR
		priority = 20
		trigger = { 
			coa_def_british_ensign_trigger = yes
		}
	}
	flag_definition = {
		coa = NEN_republic
		subject_canton = NEN_republic
		priority = 10
		trigger = { 
			coa_def_republic_flag_trigger = yes
		}
	}	
}
NEW = { # Newfoundland
	flag_definition = {
		coa = NEW
		coa_with_overlord_canton = NEW_subject
		allow_overlord_canton = yes
	}
	flag_definition = {
		coa = NEW_republic
		priority = 10
		trigger = { 
			coa_def_republic_flag_trigger = yes
		}
	}
	flag_definition = {
		coa = NEW_coa
		priority = 20
		trigger = { 
			OR = {
				coa_def_absolute_monarchy_flag_trigger = yes
				coa_def_british_ensign_trigger = yes
			}
		}
	}
	flag_definition = {
		coa = NEW_theocracy
		subject_canton = NEW_theocracy
		priority = 20
		trigger = { 
			coa_def_theocracy_flag_trigger = yes
		}
	}	
}
NNV = { # Nunavut
	flag_definition = {
		coa = NNV
		coa_with_overlord_canton = NNV_subject
		allow_overlord_canton = yes
	}
}
NVJ = { # Navajo
	flag_definition = {
		coa = NVJ
		subject_canton = NVJ
		priority = 1
	}
}
NVS = { # Nova Scotia
	flag_definition = {
		coa = NVS
		coa_with_overlord_canton = NVS_subject
		allow_overlord_canton = yes		
	}	
}
NZP = { # Nez Percés
	flag_definition = {
		coa = NZP
		subject_canton = NZP
		priority = 1
	}
}
ONT = { # Ontario
	flag_definition = {
		coa = ONT
		coa_with_overlord_canton = ONT_subject
		allow_overlord_canton = yes
	}
	flag_definition = {
		coa = ONT_republic
		priority = 10
		trigger = { 
			coa_def_republic_flag_trigger = yes
			coa_def_independent_trigger = yes
		}
	}
	flag_definition = {
		coa = ONT_secessionist
		priority = 15
		trigger = {
			coa_def_secessionist_or_revolutionary_trigger = yes
		}
	}
}
ORG = { # Oregon
	flag_definition = {
		coa = ORG
		subject_canton = ORG		
		coa_with_overlord_canton = ORG_subject
		allow_overlord_canton = yes
		priority = 1		
	}	
	flag_definition = {
		coa = ORG_communist
		priority = 1500
		trigger = { 
			coa_def_communist_flag_trigger = yes
		}
	}	
	flag_definition = {
		coa = ORG_subject_GBR
		allow_overlord_canton = yes		
		priority = 50
		trigger = { 
			coa_def_british_ensign_trigger = yes
		}
	}	
}
PUE = { # Pueblo
	flag_definition = {
		coa = PUE
		allow_overlord_canton = yes	
		coa_with_overlord_canton = PUE_subject		
		subject_canton = PUE
		priority = 1
	}	
}
QUE = { # Quebec
	flag_definition = {
		coa = QUE
		coa_with_overlord_canton = QUE_subject
		allow_overlord_canton = yes
	}
	flag_definition = {
		coa = QUE_secessionist
		priority = 15
		trigger = {
			coa_def_secessionist_or_revolutionary_trigger = yes
		}
	}
	flag_definition = {
		coa = QUE_communist
		priority = 1500
		trigger = { 
			coa_def_communist_flag_trigger = yes
		}
	}	
	flag_definition = {
		coa = QUE_subject_FRA		
		priority = 50
		trigger = { 
			coa_def_french_ensign_trigger = yes
		}
	}	
}
RIO = { # Rio Grande 
	flag_definition = {
		coa = RIO_coa
		priority = 20
		trigger = { 
			coa_def_absolute_monarchy_flag_trigger = yes
		}
	}
}
SEQ = { # Indian Territory
	flag_definition = {
		coa = SEQ
		subject_canton = SEQ
		priority = 1
	}	
}
TEX = { # Texas
	flag_definition = {
		coa = TEX_Bonnie_Blue
		subject_canton = TEX_Bonnie_Blue
		allow_overlord_canton = yes			
		coa_with_overlord_canton = TEX_subject
		priority = 1
	}
	flag_definition = {
		coa = TEX
		subject_canton = TEX
		priority = 5
		allow_overlord_canton = yes			
		coa_with_overlord_canton = TEX_subject		
		trigger = { 
			coa_def_republic_flag_trigger = yes
		}
	}	
	flag_definition = {
		coa = TEX_absolute_monarchy
		subject_canton = TEX_absolute_monarchy
		priority = 20
		trigger = { 
			coa_def_absolute_monarchy_flag_trigger = yes
		}
	}	
	flag_definition = {
		coa = TEX_merchant
		subject_canton = TEX_merchant
		priority = 10
		allow_overlord_canton = yes			
		coa_with_overlord_canton = TEX_subject			
		trigger = { 
			coa_def_dictatorship_flag_trigger = yes
		}
	}	
	flag_definition = {
		coa = TEX_oligarchy
		subject_canton = TEX_oligarchy
		priority = 25
		trigger = {
			coa_def_oligarchy_flag_trigger = yes
		}
	}	
	flag_definition = {
		coa = TEX_subject_USA
		priority = 50
		trigger = { 
			coa_def_american_ensign_trigger = yes
		}
	}
	flag_definition = {
		coa = TEX_communist
		priority = 1500
		trigger = { 
			coa_def_communist_flag_trigger = yes
		}
	}	
	flag_definition = {
		coa = TEX_subject_SPA
		priority = 30
		trigger = { 
			coa_def_spanish_ensign_trigger = yes
		}
	}	
	flag_definition = {
		coa = TEX_subject_MEX
		priority = 30
		trigger = { 
			coa_def_mexican_ensign_trigger = yes
		}
	}	
}
UOM = { # Michigam
	flag_definition = {
		coa = UOM_state_of_michigan
		priority = 5
	}
}
VRM = { # Vermont
	flag_definition = {
		coa = VRM
		subject_canton = VRM
		priority = 1
	}
	flag_definition = {
		coa = VRM_communist
		subject_canton = VRM_communist
		priority = 1500
		trigger = {
			coa_def_communist_flag_trigger = yes
		}
	}
	flag_definition = {
		coa = VRM_monarchy
		subject_canton = VRM_monarchy
		priority = 20
		trigger = {
			coa_def_absolute_monarchy_flag_trigger = yes
		}
	}
	flag_definition = {
		coa = VRM_republic
		subject_canton = VRM_republic
		priority = 20
		trigger = {
			coa_def_republic_flag_trigger = yes
		}
	}
}